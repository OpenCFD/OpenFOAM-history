/*---------------------------------------------------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  1.5                                   |
|   \\  /    A nd           | Web:      http://www.openfoam.org               |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/

FoamFile
{
    version         2.0;
    format          ascii;

    root            "";
    case            "";
    instance        "";
    local           "";

    class           dictionary;
    object          cvMeshDict;
}

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //


geometry
{
    channelWalls
    {
        type searchableBox;
        min (-1 -1 -1);
        max ( 2  2  2);
    }

    dm_baffle.obj
    {
        type triSurfaceMesh;
    }

    dangermouse.obj
    {
        type triSurfaceMesh;
    }
}


motionControl
{
    defaultCellSize     0.06;

    // Assign a priority to all requests for cell sizes, the highest overrules.
    defaultPriority     0;

    cellSizeControlGeometry
    {

    }

    relaxationModel     linear;

    linearCoeffs
    {
        relaxationStart 0.8;
        relaxationEnd   0.0;
    }

    alignmentSearchSpokes       36;

    alignmentAcceptanceAngle    48;

    targetCellSizeCoeff         1.0;

    pointInsertionCriteria
    {
        cellCentreDistCoeff             1.75;
        faceAreaRatioCoeff              0.0025;
        alignmentAcceptanceAngle        21.5;
    }

    pointRemovalCriteria
    {
        cellCentreDistCoeff  0.65;
    }

    faceAreaWeightModel piecewiseLinearRamp;

    piecewiseLinearRampCoeffs
    {
        lowerWeight             0;
        lowerAreaFraction       0.707;
        upperWeight             1;
        upperAreaFraction       1.0;
    }
}


surfaceConformation
{
    locationInMesh (0.1 0.1 0.2);

    // A faction of the local target cell size
    pointPairDistanceCoeff      0.05;

    maxQuadAngle 125;

    geometryToConformTo
    {
        // Independently specify the featureMethod of individual parts of the
        // geometry.  Allows some parts to calculate their own features
        // (including analytical surfaces), others to be read from file.
        // Optional, if ommited, assume no features.

        channelWalls
        {
            featureMethod       extractFeatures;

            extractFeaturesDetails
            {
                // Included angle used to identify the surface's own feature
                // edges.  0 = no features, 180 = all features
                featureAngle 145;
            }
        }

        dm_baffle.obj
        {
            // Allows surfaces to be use to generate baffles, default to no.
            baffleSurface       yes;

            featureMethod       featureEdgeMesh;

            featureEdgeMeshDetails
            {
                featureEdgeMesh  "LOCATION OF FEATUREEDGEMESH"
            }
        }

        dangermouse.obj
        {
            // Setting treatAsClosed true ignores whether or not the surface is
            // closed when asked to determine the volumeType of a point (whether
            // it is inside or outside).  Intended to allow imperfect surface
            // files to be meshed.  Only valid for triSurfaceMesh types, default
            // to false.
            treatAsClosed       true;

            featureMethod       triSurfaceFeatureSet;

            trisurfacefeatureSetDetails
            {
                featureSet #include "$FOAM_CASE/constant/triSurface/dangermouse.fSet"
            }
        }
    }

    initialPoints
    {
        minimumSurfaceDistance      0.0075;

        initialPointsMethod       uniformGrid;
        //initialPointsMethod       pointsFile;

        uniformGridDetails
        {
            initialCellSize         0.005;
            randomiseInitialGrid    yes;
            randomPerturbationCoeff 0.1;
        }

        pointsFileDetails
        {
            pointsFile              "$FOAM_CASE/40/internalDelaunayVertices"
        }
    }
}


polyMeshFiltering
{
    // A fraction of the local target cell size
    minimumEdgeLengthCoeff      0.2;
}

// ************************************************************************* //
