/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  dev                                   |
|   \\  /    A nd           | Web:      www.OpenFOAM.org                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version         2.0;
    format          ascii;
    class           dictionary;
    object          foamyHexMeshDict;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

#include "$WM_PROJECT_DIR/etc/caseDicts/foamyHexMeshDict"

geometry
{
    #include "meshDict.geometry"
}


initialPoints
{
    initialPointsMethod         autoDensity;

    autoDensityCoeffs
    {
        minLevels               2;
        maxSizeRatio            2.0;
        sampleResolution        5;
        surfaceSampleResolution 5;
    }
}


surfaceConformation
{
    locationInMesh                  (200 0 10);

    geometryToConformTo
    {
        spargerInlet
        {
            featureMethod           extendedFeatureEdgeMesh;
            extendedFeatureEdgeMesh "spargerInlet.extendedFeatureEdgeMesh";
        }

        spargerShaft
        {
            featureMethod           none;
        }

        vessel
        {
            featureMethod           extendedFeatureEdgeMesh;
            extendedFeatureEdgeMesh "vessel.extendedFeatureEdgeMesh";
            regions
            {
                vessel_wall         {}
                vessel_outletPipe   {}
                vessel_outlet       {}
            }
        }

        shaftRotating
        {
            featureMethod           extendedFeatureEdgeMesh;
            extendedFeatureEdgeMesh "shaftRotating.extendedFeatureEdgeMesh";
        }

        shaftStatic
        {
            featureMethod           none;
        }

        stirrer
        {
            featureMethod           extendedFeatureEdgeMesh;
            extendedFeatureEdgeMesh "stirrer.extendedFeatureEdgeMesh";
        }
    }

    additionalFeatures
    {
        spargerShaft_spargerInlet_intersection
        {
            featureMethod           extendedFeatureEdgeMesh;
            extendedFeatureEdgeMesh "spargerShaft_spargerInlet_intersection.extendedFeatureEdgeMesh";
        }

        vessel_shaftStatic_intersection
        {
            featureMethod           extendedFeatureEdgeMesh;
            extendedFeatureEdgeMesh "vessel_shaftStatic_intersection.extendedFeatureEdgeMesh";
        }

        vessel_spargerShaft_intersection
        {
            featureMethod           extendedFeatureEdgeMesh;
            extendedFeatureEdgeMesh "vessel_spargerShaft_intersection.extendedFeatureEdgeMesh";
        }

        stirrer_shaftRotating_intersection
        {
            featureMethod           extendedFeatureEdgeMesh;
            extendedFeatureEdgeMesh "stirrer_shaftRotating_intersection.extendedFeatureEdgeMesh";
        }
    }
}


motionControl
{
    defaultCellSize                 10;

    minimumCellSizeCoeff            0.1;

    maxRefinementIterations         0;

    maxSmoothingIterations          100;

    shapeControlFunctions
    {
        vessel
        {
            type                        searchableSurfaceControl;
            priority                    1;
            mode                        inside;
            forceInitialPointInsertion  off;

            surfaceCellSizeFunction     uniformValue;
            uniformValueCoeffs
            {
                surfaceCellSizeCoeff    1;
            }

            cellSizeFunction            uniform;
            uniformCoeffs{}

            regions
            {
                vessel_wall
                {
                    surfaceCellSizeFunction     uniformValue;
                    uniformValueCoeffs
                    {
                        surfaceCellSizeCoeff    1;
                    }

                    cellSizeFunction            uniform;
                    uniformCoeffs{}
                }

                vessel_outletPipe
                {
                    priority                    2;
                    surfaceCellSizeFunction     uniformValue;
                    uniformValueCoeffs
                    {
                        surfaceCellSizeCoeff    0.5;
                    }

                    cellSizeFunction            uniformDistance;
                    uniformDistanceCoeffs
                    {
                        distanceCoeff           5;
                    }
                }

                vessel_outlet
                {
                    priority                    2;
                    surfaceCellSizeFunction     uniformValue;
                    uniformValueCoeffs
                    {
                        surfaceCellSizeCoeff    0.5;
                    }

                    cellSizeFunction            uniformDistance;
                    uniformDistanceCoeffs
                    {
                        distanceCoeff           2;
                    }
                }
            }
        }

        shaftRotating
        {
            type                        searchableSurfaceControl;
            priority                    2;
            mode                        inside;
            forceInitialPointInsertion  off;

            surfaceCellSizeFunction     uniformValue;
            uniformValueCoeffs
            {
                surfaceCellSizeCoeff    0.25;
            }

            cellSizeFunction            linearDistance;
            linearDistanceCoeffs
            {
                distanceCellSizeCoeff   1;
                distanceCoeff           4;
            }
        }

        shaftStatic
        {
            ${shaftRotating};
        }

        stirrer
        {
            ${shaftRotating};
        }

        spargerInlet
        {
            type                        searchableSurfaceControl;
            priority                    2;
            mode                        inside;
            forceInitialPointInsertion  off;

            surfaceCellSizeFunction     uniformValue;
            uniformValueCoeffs
            {
                surfaceCellSizeCoeff    0.25;
            }

            cellSizeFunction            linearDistance;
            linearDistanceCoeffs
            {
                distanceCellSizeCoeff   1;
                distanceCoeff           4;
            }
        }

        spargerShaft
        {
            ${spargerInlet}
        }
    }

    objOutput                   no;

    timeChecks                  no;
}


backgroundMeshDecomposition
{
    minLevels           1;
    sampleResolution    4;
    spanScale           20;
    maxCellWeightCoeff  20;
}


polyMeshFiltering
{
    writeTetDualMesh    false;
    filterEdges         on;
    filterFaces         off;
}


meshQualityControls
{
    #include "meshQualityDict"
}


// ************************************************************************* //
