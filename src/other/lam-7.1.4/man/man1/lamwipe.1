.TH LAMWIPE 1 "July, 2007" "LAM 7.1.4" "LAM TOOLS"
.SH NAME
lamwipe \- Shutdown LAM.
.SH SYNOPSIS
.hy 0
.HP
lamwipe [-b] [-d] [-h] [-v] [-nn] [-np] [-n #] [-prefix /lam/install/path] 
[-prefix /lam/install/path/] [-sessionprefix value]
[-sessionsuffix value] [-withlamprefixpath value] 
[-ssi key value] [bhost]
.hy 1
.SH OPTIONS
.TP 12
.B \-b
Assume local and remote shell are the same.  This means that only one
remote shell invocation is used to each node.  If
.B \-b
is not used, two remote shell invocations are used to each node.
.TP
.B \-d
Turn on debugging mode.  This implies -v.
.TP
.B \-h
Print the command help menu.
.TP
.B \-n #
Lamwipe only the first # nodes.
.TP
.B \-prefix
Use the LAM installation specified in 
/lam/install/path/
.TP
.B -ssi key value
Send arguments to various SSI modules.  See the "SSI" section, below.
.TP
.B \-v
Be verbose.
.TP
.B \-nn
Don't add "-n" to the remote agent command line
.TP
.B \-np
Do not force the execution of $HOME/.profile on remote hosts
.TP
.B \-session-prefix value
Set the session prefix, overriding LAM_MPI_SESSION_PREFIX.
.TP
.B \-session-suffix value
Set the session suffix, overriding LAM_MPI_SESSION_SUFFIX.
.TP
.B \-withlamprefixpath value
Override the internal installation path.  For internal use only, do
not use unless you know what you are doing.
.SH DESCRIPTION
This command has been deprecated in favor of the 
.I lamhalt
command.  
.I lamwipe 
should only be necessary if
.I lamhalt
fails and is unable to clean up the LAM run-time environment properly.
The
.I lamwipe
tool terminates the LAM software on each of the machines specified in the
boot schema,
.IR bhost .
.I lamwipe 
is the topology tool that terminates LAM on the UNIX(tm) nodes of a
multicomputer system.
It invokes tkill(1) on each machine.
See tkill(1) for a description of how LAM is terminated on
each node.
.PP
The
.I bhost 
file is a LAM boot schema written in the host file syntax.  CPU counts
in the boot schema are ignored by
.IR lamwipe .
See bhost(5).  Instead of the command line, a boot schema can be
specified in the LAMBHOST environment variable.  Otherwise a default
file, bhost.def, is used.  LAM searches for
.I bhost
first in the local directory and then in the installation directory
under etc/.
.PP
.I lamwipe
does not quit if a particular remote node cannot be reached
or if tkill(1) fails on any node.
A message is printed if either of these failures occur, in which
case the user should investigate the cause of failure and,
if necessary, terminate LAM by manually executing tkill(1)
on the problem node(s).
In extreme cases, the user may have to terminate individual
LAM processes with kill(1).
.PP
.I lamwipe
will terminate after a limited number of nodes if the
.I \-n
option is given.
This is mainly intended for use by lamboot(1), which invokes
.I lamwipe
when a boot does not successfully complete.
.SS SSI (System Services Interface)
The
.I -ssi
switch allows the passing of parameters to various SSI modules.  LAM's
SSI modules are described in detail in lamssi(7).  SSI modules have
direct impact on MPI programs because they allow tunable parameters to
be set at run time (such as which boot device driver to use, what
parameters to pass to that driver, etc.).
.PP
The 
.I -ssi
switch takes two arguments:
.I key
and 
.IR value .
The
.I key
argument generally specifies which SSI module will receive the value.
For example, the
.I key
"boot" is used to select which RPI to be used for starting processes
on remote nodes.  The
.I value 
argument is the value that is passed.  For example:
.TP 4
lamboot -ssi boot tm
Tells LAM to use the "tm" boot module for native launching in PBSPro /
OpenPBS environments (the tm boot module does not require a boot
schema).
.TP
lamboot -ssi boot rsh -ssi rsh_agent "ssh -x" boot_file
Tells LAM to use the "rsh" boot module, and tells the rsh module to
use "ssh -x" as the specific agent to launch executables on remote
nodes.
.PP
And so on.  LAM's boot SSI modules are described in lamssi_boot(7).
.PP
The 
.I -ssi
switch can be used multiple times to specify different
.I key
and/or
.I value
arguments.  If the same
.I key
is specified more than once, the
.IR value s
are concatenated with a comma (",") separating them.
.PP
Note that the 
.I -ssi
switch is simply a shortcut for setting environment variables.  The
same effect may be accomplished by setting corresponding environment
variables before running
.IR lamwipe .
The form of the environment variables that LAM sets are:
.IR LAM_MPI_SSI_key=value .
.PP
Note that the
.I -ssi
switch overrides any previously set environment variables.  Also note
that unknown
.I key
arguments are still set as environment variable -- they are not
checked (by
.IR lamwipe )
for correctness.  Illegal or incorrect 
.I value
arguments may or may not be reported -- it depends on the specific SSI
module.
.SS Remote Executable Invocation
.PP
All tweakable aspects of launching executables on remote nodes during 
.I lamwipe
are discussed in lamssi(7) and lamssi_boot(7).  Topics include (but
are not limited to): discovery of remote shell, run-time overrides of
the agent use to launch remote executables (e.g., rsh and ssh), etc.
.SH EXAMPLES
.TP 4
lamwipe -v mynodes
Shutdown LAM on the machines described in the boot schema,
.IR mynodes .
Report about important steps as they are done.
.SH FILES
.TP 34
laminstalldir/etc/lam-bhost.def 
default boot schema file, where "laminstalldir" is the directory where
LAM/MPI was installed.
.SH SEE ALSO
recon(1), lamboot(1), tkill(1), bhost(5), lam-helpfile(5), lamssi(7),
lamssi_boot(7)
