# -*- makefile -*-
#
# Copyright (c) 2001-2003 The Trustees of Indiana University.  
#                         All rights reserved.
# Copyright (c) 1998-2001 University of Notre Dame. 
#                         All rights reserved.
# Copyright (c) 1994-1998 The Ohio State University.  
#                         All rights reserved.
# 
# This file is part of the LAM/MPI software package.  For license
# information, see the LICENSE file in the top level directory of the
# LAM/MPI source distribution.
#
# $Id: Makefile.am,v 1.9 2003/09/25 14:12:06 jsquyres Exp $
#

include $(top_srcdir)/config/Makefile.options

EXTRA_DIST		= lam-bhost.example \
			lam-bhost.def \
			lam-conf.separate \
			lam-hostmap.txt \
			$(sysconf_DATA)

sysconf_DATA		= \
			lam-conf.lamd \
			lam-helpfile

# Steal a little trickery from a generated Makefile to only install
# lam-bhost.def if one does not already exist at the target.

install-data-local:
	@ p="lam-bhost.def lam-hostmap.txt"; \
	for file in $$p; do \
	  if test -f $(DESTDIR)$(sysconfdir)/$$file; then \
	    echo "******************************* WARNING ************************************"; \
	    echo "*** Not installing new $$file over existing file in:"; \
	    echo "***   $(DESTDIR)$(sysconfdir)/$$file"; \
	    echo "******************************* WARNING ************************************"; \
	  else \
	    if test -f "$$file"; then d=; else d="$(srcdir)/"; fi; \
	    f="`echo $$file | sed -e 's|^.*/||'`"; \
	    echo " $(INSTALL_DATA) $$d$$file $(DESTDIR)$(sysconfdir)/$$f"; \
	    $(INSTALL_DATA) $$d$$file $(DESTDIR)$(sysconfdir)/$$f; \
	  fi; \
	done

tags:
TAGS:
ID:
