<link href="doxygen.css" rel="stylesheet" type="text/css">
<table width="100%" style="background-color: #ccccff; border-width: 1px; border-style: solid">
<tr><td colspan="3"><h1><center>libccmio</center></h1></td></tr>
<tr><td width="33%" style="text-align: right"><a href="index.html">Home</a></td>
    <td width="33%" style="text-align: center"><a href="modules.html">Modules</a></td>
    <td width="33%" style="text-align: left"><a href="examples.html">Examples</a></td></tr>
</table>
<!-- Generated by Doxygen 1.2.18 -->
<h1>readexample.cpp</h1> A self-contained example that reads the mesh and post data.
<p>
<div class="fragment"><pre><span class="preprocessor">#include &lt;stdlib.h&gt;</span>     <span class="comment">// For exit()</span>
<span class="preprocessor">#include &lt;<a class="code" href="a00017.html">ccmio.h</a>&gt;</span>
<span class="preprocessor">#include &lt;vector&gt;</span>
<span class="preprocessor">#include &lt;map&gt;</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>

<span class="keyword">typedef</span> std::vector&lt; unsigned int &gt; UIntArray;
<span class="keyword">typedef</span> std::map&lt; int, std::vector&lt; int &gt; &gt; FaceMap;

<span class="comment">// If you are unfamiliar with the Standard Template Library (STL), please read.</span>
<span class="comment">//   vector:    A dynamic array.  vector&lt;int&gt; is an array of ints.  Suppose</span>
<span class="comment">//              we have vector&lt;int&gt; iarr;</span>
<span class="comment">//                  iarr.push_back( ... ); adds an item to the end of the</span>
<span class="comment">//                                         array, resizing if necessary.</span>
<span class="comment">//                  iarr.size();           Returns the number of items.</span>
<span class="comment">//                  iarr[10];              The 11th item in the array.</span>
<span class="comment">//                                         No bounds checking is performed.</span>
<span class="comment">//                  iarr.resize(10);       Makes the array 10 items long.</span>
<span class="comment">//   map:       An associative container.   map&lt; int, float &gt; is an sorted</span>
<span class="comment">//              based on an integer key and contains a value float.</span>
<span class="comment">//              Suppose we have map&lt;int, float&gt; m;</span>
<span class="comment">//                  m[18] = 3.141592;      Associates Pi with the key 18.</span>
<span class="comment">//                                         Technically m[18] returns a reference</span>
<span class="comment">//                                         to the value associated with 18,</span>
<span class="comment">//                                         which is then assigned to.</span>
<span class="comment">//                                         (A reference is like a pointer that</span>
<span class="comment">//                                         cannot change where it is pointed to</span>
<span class="comment">//                                         and is treated syntactically like a</span>
<span class="comment">//                                         normal variable).</span>
<span class="comment">//   iterators: The way to increment through the container.</span>
<span class="comment">//                  container.begin()      Returns an iterator to the first item</span>
<span class="comment">//                  container.end()        Returns an iterator just past the end</span>
<span class="comment">//                  *iter                  The item being iterated to.</span>

<span class="keyword">enum</span> DataType { kScalar, kVector, kVertex, kCell, kInternalFace, kBoundaryFace,
                kBoundaryData, kBoundaryFaceData, kCellType };

<span class="keyword">using</span> <span class="keyword">namespace </span>std;

<span class="keyword">static</span> <span class="keywordtype">int</span> <span class="keyword">const</span> kNValues = 10; <span class="comment">// Number of values of each element to print</span>
<span class="keyword">static</span> <span class="keywordtype">char</span> <span class="keyword">const</span> kDefaultState[] = <span class="stringliteral">"default"</span>;
<span class="keyword">static</span> <span class="keywordtype">char</span> <span class="keyword">const</span> kUnitsName[] = <span class="stringliteral">"Units"</span>;
<span class="keyword">static</span> <span class="keywordtype">int</span> <span class="keyword">const</span> kVertOffset = 2;
<span class="keyword">static</span> <span class="keywordtype">int</span> <span class="keyword">const</span> kCellInc = 4;

<span class="keyword">static</span> <span class="keywordtype">void</span> ReadMesh( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a name="_a0"></a><a class="code" href="a00009.html">CCMIOID</a> &amp;vertices, <a class="code" href="a00009.html">CCMIOID</a> &amp;topology );
<span class="keyword">static</span> <span class="keywordtype">void</span> ReadVertices( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a class="code" href="a00009.html">CCMIOID</a> &amp;vertices,
                          <span class="keywordtype">char</span> <span class="keyword">const</span> *counter, <span class="keywordtype">int</span> offset = 0 );
<span class="keyword">static</span> <span class="keywordtype">void</span> ReadSolverInfo( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a class="code" href="a00009.html">CCMIOID</a> &amp;solution);
<span class="keyword">static</span> <span class="keywordtype">void</span> ReadPost( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a class="code" href="a00009.html">CCMIOID</a> &amp;solution );
<span class="keyword">static</span> <span class="keywordtype">void</span> ReadScalar( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a class="code" href="a00009.html">CCMIOID</a> field, vector&lt;int&gt; &amp;mapData,
                        vector&lt;float&gt; &amp;data, <span class="keywordtype">bool</span> readingVector = <span class="keyword">false</span> );
<span class="keyword">static</span> <span class="keywordtype">void</span> ReadSets( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a class="code" href="a00009.html">CCMIOID</a> &amp;problem );
<span class="keyword">static</span> <span class="keywordtype">void</span> CheckError( <a class="code" href="a00020.html#a77">CCMIOError</a> <span class="keyword">const</span> &amp;err, <span class="keywordtype">char</span> <span class="keyword">const</span> *str );
<span class="keyword">static</span> <span class="keywordtype">void</span> PrintData( <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> id, DataType type, <span class="keywordtype">void</span> *data,
                       <span class="keywordtype">void</span> *data2 = NULL );

<span class="keywordtype">int</span> main( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])
{
    <span class="keywordtype">bool</span> hasSolution = <span class="keyword">true</span>;
    <span class="keywordtype">int</span> i = 0;
    <a class="code" href="a00009.html">CCMIOID</a> root, state, processor, vertices, topology, solution, problem, next;
    <a class="code" href="a00020.html#a77">CCMIOError</a> err;

    <span class="comment">// Open the file.  Because we did not initialize 'err' we need to pass</span>
    <span class="comment">// in NULL (which always means kCCMIONoErr) and then assign the return</span>
    <span class="comment">// value to 'err'.).</span>
    err = <a name="a1"></a><a class="code" href="a00026.html#a0">CCMIOOpenFile</a>(NULL, argv[1], <a class="code" href="a00020.html#a79a29">kCCMIORead</a>, &amp;root);

    <span class="comment">// We are going to assume that we have a state with a known name.</span>
    <span class="comment">// We could instead use CCMIONextEntity() to walk through all the states in</span>
    <span class="comment">// the file and present the list to the user for selection.</span>
    <a name="a2"></a><a class="code" href="a00026.html#a41">CCMIOGetState</a>(&amp;err, root, kDefaultState, &amp;problem, &amp;state);
    <span class="keywordflow">if</span> (err != <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
    {
        cout &lt;&lt; <span class="stringliteral">"No state named '"</span> &lt;&lt; kDefaultState &lt;&lt; <span class="stringliteral">"'"</span> &lt;&lt; endl;
        <span class="keywordflow">return</span>(0);
    }
    
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size;
    <a name="a3"></a><a class="code" href="a00026.html#a53">CCMIOEntityDescription</a>(&amp;err, state, &amp;size, NULL);
    <span class="keywordtype">char</span> *desc = <span class="keyword">new</span> <span class="keywordtype">char</span>[size + 1];
    <a class="code" href="a00026.html#a53">CCMIOEntityDescription</a>(&amp;err, state, NULL, desc);
    cout &lt;&lt; <span class="stringliteral">"Reading state '"</span> &lt;&lt; kDefaultState &lt;&lt; <span class="stringliteral">"' ("</span> &lt;&lt; desc &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; endl;
    <span class="keyword">delete</span> [] desc;

    <span class="comment">// Find the first processor (i has previously been initialized to 0) and</span>
    <span class="comment">// read the mesh and solution information.</span>
    <a name="a4"></a><a class="code" href="a00026.html#a49">CCMIONextEntity</a>(&amp;err, state, <a class="code" href="a00020.html#a83a53">kCCMIOProcessor</a>, &amp;i, &amp;processor);
    <a name="a5"></a><a class="code" href="a00026.html#a69">CCMIOReadProcessor</a>(&amp;err, processor, &amp;vertices, &amp;topology, NULL, &amp;solution);

    <span class="keywordflow">if</span> (err != <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
    {
        <span class="comment">// Maybe no solution;  try again</span>
        err = <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>;
        <a class="code" href="a00026.html#a69">CCMIOReadProcessor</a>(&amp;err, processor, &amp;vertices, &amp;topology, NULL, NULL);
        <span class="keywordflow">if</span> (err != <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
        {
            cout &lt;&lt; <span class="stringliteral">"Could not read the file."</span> &lt;&lt; endl;
            <span class="keywordflow">return</span>(0);
        }
        hasSolution = <span class="keyword">false</span>;
    }

    <span class="comment">// Print out the problem description (just cell types, and model constants)</span>
    i = 0;
    <span class="keywordflow">if</span> (<a name="a6"></a><a class="code" href="a00026.html#a34">CCMIOIsValidEntity</a>(problem))   <span class="comment">// if we have a problem description...</span>
    {
        <span class="comment">// ... walk through each cell type and print it...</span>
        <span class="keywordflow">while</span> (<a class="code" href="a00026.html#a49">CCMIONextEntity</a>(NULL, problem, <a class="code" href="a00020.html#a83a54">kCCMIOCellType</a>, &amp;i, &amp;next)
                                                                 == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
        {
            <span class="keywordtype">char</span> *name;
            <span class="keywordtype">int</span> size, cellType;

            <span class="comment">// ... if it has a material type.  (Note that we do not pass in</span>
            <span class="comment">// an array to get the name because we do not know how long the</span>
            <span class="comment">// string is yet.  Many parameters to CCMIO functions that return</span>
            <span class="comment">// data can be NULL if that data is not needed.)</span>
            <span class="keywordflow">if</span> (<a name="a7"></a><a class="code" href="a00026.html#a14">CCMIOReadOptstr</a>(NULL, next, <span class="stringliteral">"MaterialType"</span>, &amp;size, NULL)
                                                                   == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
            {
                name = <span class="keyword">new</span> <span class="keywordtype">char</span>[size + 1];
                <a class="code" href="a00026.html#a14">CCMIOReadOptstr</a>(&amp;err, next, <span class="stringliteral">"MaterialType"</span>, &amp;size, name);
                <a name="a8"></a><a class="code" href="a00026.html#a39">CCMIOGetEntityIndex</a>(&amp;err, next, &amp;cellType);
                PrintData(i, cellType, kCellType, name);
                <span class="keyword">delete</span> [] name;
            }
        }

        <span class="keywordtype">float</span> value;
        <a class="code" href="a00009.html">CCMIOID</a> constants;

        <span class="comment">// Read some constants of particular interest, fall back to defaults</span>
        <span class="comment">// if they don't exist (or at least, that is what we would do if we</span>
        <span class="comment">// actually used them).  If you want to iterate over all the constants</span>
        <span class="comment">// instead, you will need to use CCMIOGetEntityNode() and use</span>
        <span class="comment">// CCMIOGetNextChild(), and CCMIOReadData() in the Core API.</span>
        <span class="keywordflow">if</span> (<a name="a9"></a><a class="code" href="a00026.html#a37">CCMIOGetEntity</a>(NULL, problem, <a class="code" href="a00020.html#a83a62">kCCMIOModelConstants</a>, 0, &amp;constants)
                                                                 == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
        {
            <span class="keywordflow">if</span> (<a name="a10"></a><a class="code" href="a00026.html#a12">CCMIOReadOptf</a>(NULL, constants, <span class="stringliteral">"Gravity"</span>, &amp;value) == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
                cout &lt;&lt; <span class="stringliteral">"Gravity is "</span> &lt;&lt; value &lt;&lt; <span class="stringliteral">" m/s^2"</span> &lt;&lt; endl;
            <span class="keywordflow">else</span>
                cout &lt;&lt; <span class="stringliteral">"Gravity is unspecified"</span> &lt;&lt; endl;

            <span class="keywordflow">if</span> (<a class="code" href="a00026.html#a12">CCMIOReadOptf</a>(NULL, constants, <span class="stringliteral">"Hubble constant"</span>, &amp;value) == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
                cout &lt;&lt; <span class="stringliteral">"Hubble constant is "</span> &lt;&lt; value &lt;&lt; endl;
            <span class="keywordflow">else</span>
                cout &lt;&lt; <span class="stringliteral">"Hubble constant is unspecified"</span> &lt;&lt; endl;
        }

        <span class="comment">// Read in the prostar sets.  (This is probably not necessary for</span>
        <span class="comment">// most applications, but included to show proper parsing.)</span>
        ReadSets(err, problem);
    }
    ReadMesh(err, vertices, topology);
    <span class="keywordflow">if</span> (hasSolution)
        {
        ReadSolverInfo(err, solution);
        ReadPost(err, solution);
        }
    <span class="keywordflow">else</span>
        cout &lt;&lt; <span class="stringliteral">"No post data."</span> &lt;&lt; endl;

    <span class="comment">// Read Lagrangian data</span>
    vector&lt;CCMIOID&gt; ids;
    <a class="code" href="a00009.html">CCMIOID</a> lagrangian;
    i = 0;
    <span class="keywordflow">while</span> (<a class="code" href="a00026.html#a49">CCMIONextEntity</a>(&amp;err, processor, <a class="code" href="a00020.html#a83a56">kCCMIOLagrangianData</a>, &amp;i,
                           &amp;lagrangian) == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
    {
        <a class="code" href="a00009.html">CCMIOID</a> solutionID, positionsID;
        <a name="a11"></a><a class="code" href="a00026.html#a72">CCMIOReadLagrangianData</a>(&amp;err, lagrangian, &amp;positionsID, &amp;solutionID);

        <a class="code" href="a00026.html#a53">CCMIOEntityDescription</a>(&amp;err, lagrangian, &amp;size, NULL);
        <span class="keywordtype">char</span> *label = <span class="keyword">new</span> <span class="keywordtype">char</span>[size + 1];
        <a class="code" href="a00026.html#a53">CCMIOEntityDescription</a>(&amp;err, lagrangian, NULL, label);
        cout &lt;&lt; <span class="stringliteral">"Lagrangian data '"</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"'"</span> &lt;&lt; endl;
        <span class="keyword">delete</span> [] label;

        ReadVertices(err, positionsID, <span class="stringliteral">"positions"</span>);
        ReadPost(err, solutionID);
        ids.push_back(positionsID);
        ids.push_back(solutionID);
    }

    <span class="keywordflow">for</span> (vector&lt;CCMIOID&gt;::iterator it = ids.begin();  it != ids.end();  ++it)
        <a name="a12"></a><a class="code" href="a00026.html#a3">CCMIOCloseFile</a>(&amp;err, *it);

    <a class="code" href="a00026.html#a3">CCMIOCloseFile</a>(&amp;err, vertices);
    <a class="code" href="a00026.html#a3">CCMIOCloseFile</a>(&amp;err, topology);
    <a class="code" href="a00026.html#a3">CCMIOCloseFile</a>(&amp;err, solution);
    <a class="code" href="a00026.html#a3">CCMIOCloseFile</a>(&amp;err, root);
}

<span class="keywordtype">void</span> ReadMesh( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a class="code" href="a00009.html">CCMIOID</a> &amp;vertices, <a class="code" href="a00009.html">CCMIOID</a> &amp;topology )
{
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, j, nCells, nFaces, size;
    <a class="code" href="a00009.html">CCMIOID</a> mapID, id;
    vector&lt;int&gt; mapData, faces, cells, faceCells;
    vector&lt;float&gt; verts;

    ReadVertices(err, vertices, <span class="stringliteral">"vertices"</span>, kVertOffset);

    <span class="comment">// Read the cells.  Store cell IDs so that we know what cells are in</span>
    <span class="comment">// this post data.</span>
    <a class="code" href="a00026.html#a37">CCMIOGetEntity</a>(&amp;err, topology, <a class="code" href="a00020.html#a83a47">kCCMIOCells</a>, 0, &amp;id);
    <a name="a13"></a><a class="code" href="a00026.html#a50">CCMIOEntitySize</a>(&amp;err, id, &amp;nCells, NULL);
    cells.resize(nCells);
    mapData.resize(nCells);
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0;  k &lt; nCells;  k += kCellInc)
    {
        <a name="a14"></a><a class="code" href="a00026.html#a62">CCMIOReadCells</a>(&amp;err, id, &amp;mapID, &amp;cells[k], k, k + kCellInc);
        <a name="a15"></a><a class="code" href="a00026.html#a57">CCMIOReadMap</a>(&amp;err, mapID, &amp;mapData[k], k, k + kCellInc);
    }

    cout &lt;&lt; <span class="stringliteral">"\t"</span> &lt;&lt; nCells &lt;&lt; <span class="stringliteral">" cells"</span> &lt;&lt; endl;
    <span class="keywordflow">for</span> (i = 0;  i &lt; nCells &amp;&amp; err == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>;  ++i)
        PrintData(i, mapData[i], kCell, &amp;cells[i]);
    CheckError(err, <span class="stringliteral">"Error reading cells"</span>);

    <span class="comment">// Read the internal faces.</span>
    <a class="code" href="a00026.html#a37">CCMIOGetEntity</a>(&amp;err, topology, <a class="code" href="a00020.html#a83a45">kCCMIOInternalFaces</a>, 0, &amp;id);
    <a class="code" href="a00026.html#a50">CCMIOEntitySize</a>(&amp;err, id, &amp;nFaces, NULL);
    mapData.resize(nFaces);
    faceCells.resize(2 * nFaces);
    <a name="a16"></a><a class="code" href="a00026.html#a64">CCMIOReadFaces</a>(&amp;err, id, <a class="code" href="a00020.html#a83a45">kCCMIOInternalFaces</a>, NULL, &amp;size, NULL,
                   kCCMIOStart, kCCMIOEnd);
    faces.resize(size);
    <a class="code" href="a00026.html#a64">CCMIOReadFaces</a>(&amp;err, id, <a class="code" href="a00020.html#a83a45">kCCMIOInternalFaces</a>, &amp;mapID, NULL, &amp;faces[0],
                   kCCMIOStart, kCCMIOEnd);
    <a name="a17"></a><a class="code" href="a00026.html#a66">CCMIOReadFaceCells</a>(&amp;err, id, <a class="code" href="a00020.html#a83a45">kCCMIOInternalFaces</a>, &amp;faceCells[0],
                       kCCMIOStart, kCCMIOEnd);
    <a class="code" href="a00026.html#a57">CCMIOReadMap</a>(&amp;err, mapID, &amp;mapData[0], kCCMIOStart, kCCMIOEnd);
    
    cout &lt;&lt; <span class="stringliteral">"\t"</span> &lt;&lt; nFaces &lt;&lt; <span class="stringliteral">" faces"</span> &lt;&lt; endl;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pos = 0;
    i = 0;
    <span class="keywordflow">while</span> (pos &lt; faces.size())
    {
        PrintData(i, mapData[i], kInternalFace, &amp;faces[pos], &amp;faceCells[2 * i]);
        pos += faces[pos] + 1;
        i++;
    }
    CheckError(err, <span class="stringliteral">"Error reading internal faces"</span>);

    <span class="comment">// Read the boundary faces.</span>
    <span class="keywordtype">int</span> index = 0;
    <span class="keywordflow">while</span> (<a class="code" href="a00026.html#a49">CCMIONextEntity</a>(NULL, topology, <a class="code" href="a00020.html#a83a46">kCCMIOBoundaryFaces</a>, &amp;index, &amp;id)
                                                                 == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
    {
        <span class="keywordtype">int</span> boundaryVal;
        vector&lt;int&gt; prostarIDs;

        <a class="code" href="a00026.html#a50">CCMIOEntitySize</a>(&amp;err, id, &amp;nFaces, NULL);
        mapData.resize(nFaces);
        faceCells.resize(nFaces);
        <a class="code" href="a00026.html#a64">CCMIOReadFaces</a>(&amp;err, id, <a class="code" href="a00020.html#a83a46">kCCMIOBoundaryFaces</a>, NULL, &amp;size, NULL,
                       kCCMIOStart, kCCMIOEnd);
        faces.resize(size);
        <a class="code" href="a00026.html#a64">CCMIOReadFaces</a>(&amp;err, id, <a class="code" href="a00020.html#a83a46">kCCMIOBoundaryFaces</a>, &amp;mapID, NULL, &amp;faces[0],
                       kCCMIOStart, kCCMIOEnd);
        <a class="code" href="a00026.html#a66">CCMIOReadFaceCells</a>(&amp;err, id, <a class="code" href="a00020.html#a83a46">kCCMIOBoundaryFaces</a>, &amp;faceCells[0],
                           kCCMIOStart, kCCMIOEnd);
        <a class="code" href="a00026.html#a57">CCMIOReadMap</a>(&amp;err, mapID, &amp;mapData[0], kCCMIOStart, kCCMIOEnd);

        <span class="comment">// If the optional ProstarFaceId is there, read it</span>
        <span class="keywordflow">if</span> (<a name="a18"></a><a class="code" href="a00026.html#a15">CCMIOReadOpt1i</a>(NULL, id, <span class="stringliteral">"ProstarFaceId"</span>, NULL,
                           kCCMIOStart, kCCMIOEnd) == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
        {
            prostarIDs.resize(nFaces);
            <a class="code" href="a00026.html#a15">CCMIOReadOpt1i</a>(NULL, id, <span class="stringliteral">"ProstarFaceId"</span>, &amp;prostarIDs[0],
                           kCCMIOStart, kCCMIOEnd);
        }
    
        <a class="code" href="a00026.html#a39">CCMIOGetEntityIndex</a>(&amp;err, id, &amp;boundaryVal);
        cout &lt;&lt; <span class="stringliteral">"\t"</span> &lt;&lt; nFaces &lt;&lt; <span class="stringliteral">" boundary faces (boundary "</span> &lt;&lt; boundaryVal
             &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; endl;
        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pos = 0;
        j = 0;
        <span class="keywordflow">while</span> (pos &lt; faces.size())
        {
            PrintData(j, mapData[j], kBoundaryFace, &amp;faces[pos],
                      &amp;faceCells[j]);
            j++;
            pos += faces[pos] + 1;
        }
        CheckError(err, <span class="stringliteral">"Error reading boundary faces"</span>);
    }
}

<span class="keywordtype">void</span> ReadVertices( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a class="code" href="a00009.html">CCMIOID</a> &amp;vertices, <span class="keywordtype">char</span> <span class="keyword">const</span> *counter,
                   <span class="keywordtype">int</span> offset )
{
    <span class="keywordtype">int</span> dims = 1;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, nVertices, size;
    <span class="keywordtype">float</span> scale;
    <span class="keywordtype">int</span> mapData[kNValues] = { 0 };
    <span class="keywordtype">float</span> verts[3 * kNValues] = { 0 };
    <a class="code" href="a00009.html">CCMIOID</a> mapID;

    <span class="comment">// Read the vertices.  This involves reading both the vertex data and</span>
    <span class="comment">// the map, which maps the index into the data array with the ID number.</span>
    <span class="comment">// As we process the vertices we need to be sure to scale them by the</span>
    <span class="comment">// appropriate scaling factor.  The offset is just to show you can read</span>
    <span class="comment">// any chunk.  Normally this would be in a for loop.</span>
    <a class="code" href="a00026.html#a50">CCMIOEntitySize</a>(&amp;err, vertices, &amp;nVertices, NULL);
    <a name="a19"></a><a class="code" href="a00026.html#a58">CCMIOReadVerticesf</a>(&amp;err, vertices, &amp;dims, &amp;scale, &amp;mapID, verts,
                       offset, offset + kNValues);
    <a class="code" href="a00026.html#a57">CCMIOReadMap</a>(&amp;err, mapID, mapData, offset, offset + kNValues);

    <a class="code" href="a00026.html#a53">CCMIOEntityDescription</a>(&amp;err, vertices, &amp;size, NULL);
    <span class="keywordtype">char</span> *label = <span class="keyword">new</span> <span class="keywordtype">char</span>[size + 1];
    <a class="code" href="a00026.html#a53">CCMIOEntityDescription</a>(&amp;err, vertices, NULL, label);
    cout &lt;&lt; <span class="stringliteral">"label: '"</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">"'"</span> &lt;&lt; endl;
    <span class="keyword">delete</span> [] label;

    cout &lt;&lt; <span class="stringliteral">"\t"</span> &lt;&lt; nVertices &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; counter &lt;&lt; endl;
    <span class="keywordflow">if</span> (nVertices &gt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)kNValues)
        nVertices = kNValues;
    <span class="keywordflow">for</span> (i = 0;  i &lt; nVertices &amp;&amp; err == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>;  ++i)
    {
        verts[dims * i    ] *= scale;
        verts[dims * i + 1] *= scale;
        verts[dims * i + 2] *= scale;   <span class="comment">// This example assumes three</span>
                                        <span class="comment">// dimensional vertices.</span>
        PrintData(i, mapData[i], kVertex, &amp;verts[dims * i]);
    }
    cout &lt;&lt; <span class="stringliteral">"\t\t..."</span> &lt;&lt; endl;
    CheckError(err, <span class="stringliteral">"Error reading vertices"</span>);
}

<span class="keywordtype">void</span> ReadSolverInfo( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a class="code" href="a00009.html">CCMIOID</a> &amp;solution)
{
    <span class="keywordtype">char</span> solver[kCCMIOMaxStringLength+1], timeUnits[kCCMIOMaxStringLength+1];
    <span class="keywordtype">int</span> iterations;
    <span class="keywordtype">float</span> time, angle;
    <a class="code" href="a00009.html">CCMIOID</a> restart;

    <span class="keywordflow">if</span> (<a class="code" href="a00026.html#a37">CCMIOGetEntity</a>(NULL, solution, <a class="code" href="a00020.html#a83a59">kCCMIORestart</a>, 0, &amp;restart)!=<a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
    {
        cout &lt;&lt; <span class="stringliteral">"(No solver information)"</span> &lt;&lt; endl;
        <span class="keywordflow">return</span>;
    }

    <a name="a20"></a><a class="code" href="a00026.html#a85">CCMIOReadRestartInfo</a>(&amp;err, restart, solver, &amp;iterations, &amp;time, timeUnits,
                         &amp;angle);
    cout &lt;&lt; <span class="stringliteral">"The following post data is the result of iteration "</span>
         &lt;&lt; iterations &lt;&lt; <span class="stringliteral">" (time: "</span> &lt;&lt; time &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; timeUnits
         &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; endl;
    cout &lt;&lt; <span class="stringliteral">"of solver '"</span> &lt;&lt; solver &lt;&lt; <span class="stringliteral">"':"</span> &lt;&lt; endl;

    <span class="comment">// You might want to read more solver data here, in which case, do</span>
    <span class="comment">// CCMIOGetEntity(&amp;err, restart, kCCMIORestartData, 0, &amp;restartData);</span>
    <span class="comment">// and proceed to read the information.  Do likewise if you want to read</span>
    <span class="comment">// the reference data.</span>
}

<span class="keywordtype">void</span> ReadPost( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a class="code" href="a00009.html">CCMIOID</a> &amp;solution )
{
    <span class="keywordtype">bool</span> oldFile = <span class="keyword">false</span>;
    <span class="keywordtype">char</span> name[kCCMIOMaxStringLength + 1];
    <span class="keywordtype">int</span> h = 0, i = 0, dimSizes[] = { 0, 1, 3, 9 };
    <a class="code" href="a00009.html">CCMIOID</a> field, phase;
    <a class="code" href="a00020.html#a81">CCMIODimensionality</a> dims;
    vector&lt;int&gt; mapData;
    vector&lt;float&gt; data;

    oldFile = (<a class="code" href="a00026.html#a49">CCMIONextEntity</a>(NULL, solution, <a class="code" href="a00020.html#a83a58">kCCMIOFieldPhase</a>, &amp;h, &amp;phase)
                                                                != <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>);
    h = 0;
    <span class="keywordflow">while</span> (oldFile ||
           <a class="code" href="a00026.html#a49">CCMIONextEntity</a>(NULL, solution, <a class="code" href="a00020.html#a83a58">kCCMIOFieldPhase</a>, &amp;h, &amp;phase)
                                                                == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
    {
        <span class="keywordflow">if</span> (oldFile)
            phase = solution;
        <span class="keywordflow">else</span>
        {
            <span class="keywordtype">int</span> phaseNum = 0;
            <a class="code" href="a00026.html#a39">CCMIOGetEntityIndex</a>(NULL, phase, &amp;phaseNum);
            cout &lt;&lt; <span class="stringliteral">"Phase "</span> &lt;&lt; phaseNum &lt;&lt; endl;
        }
        <span class="comment">// Walk through each field in this field set (i.e. the post data)</span>
        <span class="comment">// and print out each one.</span>
        <span class="keywordflow">while</span> (<a class="code" href="a00026.html#a49">CCMIONextEntity</a>(NULL, phase, <a class="code" href="a00020.html#a83a50">kCCMIOField</a>, &amp;i, &amp;field)
                                                                == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
        {
            <span class="comment">// Read the information about the field so that we know how to</span>
            <span class="comment">// process this field.</span>
            <span class="keywordtype">char</span> shortName[kCCMIOProstarShortNameLength+1], *units = NULL;
            <span class="keywordtype">int</span> usize;
            <a class="code" href="a00020.html#a78">CCMIODataType</a> datatype;
            <a name="a21"></a><a class="code" href="a00026.html#a45">CCMIOReadField</a>(&amp;err, field, name, shortName, &amp;dims, &amp;datatype);
            <span class="keywordflow">if</span> (<a class="code" href="a00026.html#a14">CCMIOReadOptstr</a>(NULL, field, kUnitsName, &amp;usize, NULL)
                                                                 == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
            {
                units = <span class="keyword">new</span> <span class="keywordtype">char</span>[usize + 1];
                <a class="code" href="a00026.html#a14">CCMIOReadOptstr</a>(&amp;err, field, kUnitsName, NULL, units);
            }
            cout &lt;&lt; <span class="stringliteral">"\tPost field '"</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">"'  ("</span> &lt;&lt; shortName &lt;&lt; <span class="stringliteral">"):\t("</span>;
            <span class="keywordflow">if</span> (dims == 1)    <span class="comment">// datatype is not meaningful for vectors/tensors</span>
            {
                <span class="keywordflow">if</span> (datatype == <a class="code" href="a00020.html#a78a21">kCCMIOFloat32</a>)
                    cout &lt;&lt; <span class="stringliteral">"Float32"</span>;
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (datatype == <a class="code" href="a00020.html#a78a22">kCCMIOFloat64</a>)
                    cout &lt;&lt; <span class="stringliteral">"Float64"</span>;
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (datatype == <a class="code" href="a00020.html#a78a23">kCCMIOInt32</a>)
                    cout &lt;&lt; <span class="stringliteral">"Int32"</span>;
                <span class="keywordflow">else</span>
                    cout &lt;&lt; <span class="stringliteral">"Invalid datatype"</span>;
            }
            cout &lt;&lt; <span class="stringliteral">")\tUnits: "</span> &lt;&lt; ((units) ? units : <span class="stringliteral">"&lt;none&gt;"</span>) &lt;&lt; endl;
            <span class="keyword">delete</span> [] units;
            
            <span class="keywordflow">switch</span> (dims)
            {
                <span class="keywordflow">case</span> <a class="code" href="a00020.html#a81a35">kCCMIOScalar</a>:
                    {
                    ReadScalar(err, field, mapData, data);
                    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0;  k &lt; data.size();  ++k)
                        PrintData(k, mapData[i], kScalar, &amp;data[k]); 
                    }
                    <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="a00020.html#a81a36">kCCMIOVector</a>:
                    {
                    vector&lt;float&gt; u, v, w;
                    <a class="code" href="a00009.html">CCMIOID</a> scalar;
                    <a name="a22"></a><a class="code" href="a00026.html#a74">CCMIOReadMultiDimensionalFieldData</a>(&amp;err, field,
                                                       <a class="code" href="a00020.html#a84a65">kCCMIOVectorX</a>, &amp;scalar);
                    <span class="keywordflow">if</span> (err == <a class="code" href="a00020.html#a77a18">kCCMIOVersionErr</a>)
                    {
                        <span class="comment">// If we are reading an older version of the file,</span>
                        <span class="comment">// where vectors are stored as vectors, not components,</span>
                        <span class="comment">// we need to call CCMIOReadFieldData*(), which is</span>
                        <span class="comment">// all that ReadScalar() does.</span>
                        err = <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>;
                        ReadScalar(err, field, mapData, data, <span class="keyword">true</span>);
                        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> size = data.size() / dimSizes[dims];
                        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0;  k &lt; size;  ++k)
                            PrintData(k, mapData[i], kVector,
                                  &amp;data[dimSizes[dims] * k]);
                    }
                    <span class="keywordflow">else</span>
                    {
                        ReadScalar(err, scalar, mapData, u);
                        <a class="code" href="a00026.html#a74">CCMIOReadMultiDimensionalFieldData</a>(&amp;err, field,
                                                           <a class="code" href="a00020.html#a84a66">kCCMIOVectorY</a>,
                                                           &amp;scalar);
                        ReadScalar(err, scalar, mapData, v);
                        <a class="code" href="a00026.html#a74">CCMIOReadMultiDimensionalFieldData</a>(&amp;err, field,
                                                           <a class="code" href="a00020.html#a84a67">kCCMIOVectorZ</a>,
                                                           &amp;scalar);
                        ReadScalar(err, scalar, mapData, w);
                        data.resize(3 * u.size());
                        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0;  k &lt; u.size();  ++k)
                        {
                            data[3 * k    ] = u[k];
                            data[3 * k + 1] = v[k];
                            data[3 * k + 2] = w[k];
                        }
                        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0;  k &lt; u.size();  ++k)
                            PrintData(k, mapData[i], kVector,
                                      &amp;data[dimSizes[dims] * k]);
                    }
                    }
                    <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> <a class="code" href="a00020.html#a81a37">kCCMIOTensor</a>:
                    cout &lt;&lt; <span class="stringliteral">"Tensor data not supported.  Ignoring field "</span>
                         &lt;&lt; name &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; endl;
                    <span class="keywordflow">continue</span>;
            }
            CheckError(err, <span class="stringliteral">"Error reading post data"</span>);
        }
        oldFile = <span class="keyword">false</span>;
    }
}

<span class="keywordtype">void</span> ReadScalar( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a class="code" href="a00009.html">CCMIOID</a> field,
                 vector&lt;int&gt; &amp;mapData, vector&lt;float&gt; &amp;data,
                 <span class="keywordtype">bool</span> readingVector <span class="comment">/* = false */</span>)
{
    <a class="code" href="a00020.html#a1">CCMIOSize</a> n;
    <a class="code" href="a00020.html#a0">CCMIOIndex</a> max;
    <span class="keywordtype">int</span> j = 0;
    <a class="code" href="a00009.html">CCMIOID</a> fieldData, mapID;
    <a class="code" href="a00020.html#a82">CCMIODataLocation</a> type;

    <span class="comment">// Read each piece of field data</span>
    <span class="keywordflow">while</span> (<a class="code" href="a00026.html#a49">CCMIONextEntity</a>(NULL, field, <a class="code" href="a00020.html#a83a51">kCCMIOFieldData</a>, &amp;j, &amp;fieldData)
                                                                 == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
    {
        <span class="comment">// Figure out how big this data is so we can read it. If we were</span>
        <span class="comment">// storing this information permanently we might use a sparse</span>
        <span class="comment">// array, in which case we would need to find the maximum ID and</span>
        <span class="comment">// make the array that size.</span>
        <a class="code" href="a00026.html#a50">CCMIOEntitySize</a>(&amp;err, fieldData, &amp;n, &amp;max);
        mapData.resize(n);
        <a name="a23"></a><a class="code" href="a00026.html#a81">CCMIOReadFieldDataf</a>(&amp;err, fieldData, &amp;mapID, &amp;type, NULL,
                            kCCMIOStart, kCCMIOEnd);
        <a class="code" href="a00026.html#a57">CCMIOReadMap</a>(&amp;err, mapID, &amp;mapData[0], kCCMIOStart, kCCMIOEnd);

        <span class="comment">// We are only going to process cell data.  Vertex data would</span>
        <span class="comment">// be processed similarly. If your appliation has only one value</span>
        <span class="comment">// for boundary data, you would separate the face data into</span>
        <span class="comment">// each boundary and combine it together.  If your application</span>
        <span class="comment">// stores boundary data on each face you could read it in using</span>
        <span class="comment">// similar procedures for the cell and vertex data.  Note that</span>
        <span class="comment">// the file may not contain all types of data.</span>
        <span class="keywordflow">if</span> (type == <a class="code" href="a00020.html#a82a39">kCCMIOCell</a>)
        {
            <span class="keywordflow">if</span> (readingVector)
                data.resize(3 * n);
            <span class="keywordflow">else</span>
                data.resize(n);
            <span class="comment">// If we want double precision we should use</span>
            <span class="comment">// CCMIOReadFieldDatad().</span>
            <a class="code" href="a00026.html#a81">CCMIOReadFieldDataf</a>(&amp;err, fieldData, &amp;mapID, NULL,
                                &amp;data[0], kCCMIOStart, kCCMIOEnd);
        }

        CheckError(err, <span class="stringliteral">"Error reading post data"</span>);
    }
}

<span class="keywordtype">void</span> ReadSets( <a class="code" href="a00020.html#a77">CCMIOError</a> &amp;err, <a class="code" href="a00009.html">CCMIOID</a> &amp;problem )
{
    <span class="keywordtype">int</span> nChars;
        
    <span class="keywordflow">if</span> (<a class="code" href="a00026.html#a14">CCMIOReadOptstr</a>(NULL, problem, <span class="stringliteral">"MonitoringSets"</span>, &amp;nChars, NULL) == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
    {
        <span class="keywordtype">char</span> *setStr = <span class="keyword">new</span> <span class="keywordtype">char</span>[nChars + 1];
        <span class="keywordtype">char</span> setNames[][16] = { <span class="stringliteral">"CellSet"</span>, <span class="stringliteral">"VertexSet"</span>, <span class="stringliteral">"BoundarySet"</span>,
                                <span class="stringliteral">"BlockSet"</span>, <span class="stringliteral">"SplineSet"</span>, <span class="stringliteral">"CoupleSet"</span> };
        <span class="keywordtype">int</span> i = 0, j, len, size;
        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> flags;
        string name;
        <a class="code" href="a00009.html">CCMIOID</a> setID;
            
        cout &lt;&lt; <span class="stringliteral">"Monitoring prostar sets:"</span> &lt;&lt; endl;

        <span class="comment">// See the CCM specification for official documentation of this node.</span>
        <span class="comment">// The format is "&lt;size of string&gt; string &lt;size of string&gt; string ..."</span>
        <span class="comment">// The size of the string is one (binary) character.</span>
        <a class="code" href="a00026.html#a14">CCMIOReadOptstr</a>(&amp;err, problem, <span class="stringliteral">"MonitoringSets"</span>, NULL, setStr);
        <span class="keywordflow">while</span> (i &lt; nChars)
        {
            j = 0;
            len = setStr[i++];  <span class="comment">// First character is the length</span>
            name.clear();
            <span class="keywordflow">for</span> (j = 0;  j &lt; len;  ++j)  <span class="comment">// Then the string (no C-style \0)</span>
                name.push_back(setStr[i++]);
            <a name="a24"></a><a class="code" href="a00026.html#a47">CCMIOGetProstarSet</a>(&amp;err, problem, name.c_str(), &amp;size, NULL,
                               NULL, NULL);
            <span class="keywordtype">char</span> *longName = <span class="keyword">new</span> <span class="keywordtype">char</span>[size + 1];
            <a class="code" href="a00026.html#a47">CCMIOGetProstarSet</a>(&amp;err, problem, name.c_str(), NULL, longName,
                               &amp;flags, &amp;setID);
            cout &lt;&lt; <span class="stringliteral">"\t"</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">" ("</span> &lt;&lt; longName &lt;&lt; <span class="stringliteral">"):"</span> &lt;&lt; endl;
            <span class="keyword">delete</span> [] longName;

            <span class="comment">// Read each set that is available and print it out.</span>
            <span class="comment">// There is no need to loop through the nodes if you know which</span>
            <span class="comment">// set you want;  just check 'flags' to see if the node is there</span>
            <span class="comment">// (or just access the node and check for an error).</span>
            <span class="keywordtype">int</span> n = 0;
            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> s = 1;  s &lt;= kCCMIOCoupleSet;  s = s &lt;&lt; 1)
            {
                <span class="keywordflow">if</span> (flags &amp; s)
                {
                    <span class="keywordtype">int</span> *theSet;
                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size;
                    <a name="a25"></a><a class="code" href="a00026.html#a33">CCMIOGetOptInfo</a>(&amp;err, setID, setNames[n], NULL,
                                    &amp;size, NULL, NULL);
                    theSet = <span class="keyword">new</span> <span class="keywordtype">int</span>[size];
                    <a class="code" href="a00026.html#a15">CCMIOReadOpt1i</a>(&amp;err, setID, setNames[n], theSet,
                                   kCCMIOStart, kCCMIOEnd);

                    <span class="comment">// Print out the set</span>
                    cout &lt;&lt; <span class="stringliteral">"\t\t"</span> &lt;&lt; setNames[n] &lt;&lt; <span class="stringliteral">":  "</span>;
                    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idx = 0;  idx &lt; size;  ++idx)
                        cout &lt;&lt; theSet[idx] &lt;&lt; <span class="stringliteral">"  "</span>;
                    cout &lt;&lt; endl;
                    <span class="keyword">delete</span> [] theSet;
                }
                n++;
            }
        }

        <span class="keyword">delete</span> [] setStr;
    }
    <span class="keywordflow">else</span>
        cout &lt;&lt; <span class="stringliteral">"No prostar sets selected for monitoring"</span> &lt;&lt; endl;
    CheckError(err, <span class="stringliteral">"Error reading prostar sets"</span>);
}
<span class="comment">//--------------------------- Helper functions --------------------------------</span>
<span class="keywordtype">void</span> CheckError( <a class="code" href="a00020.html#a77">CCMIOError</a> <span class="keyword">const</span> &amp;err, <span class="keywordtype">char</span> <span class="keyword">const</span> *str )
{
    <span class="keywordflow">if</span> (err == <a class="code" href="a00020.html#a77a4">kCCMIONoErr</a>)
        <span class="keywordflow">return</span>;

    cout &lt;&lt; str &lt;&lt; <span class="stringliteral">" (error "</span> &lt;&lt; err &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; endl;
    exit(1);
}

<span class="keywordtype">void</span> PrintData( <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> id, DataType type, <span class="keywordtype">void</span> *data, <span class="keywordtype">void</span> *data2 <span class="comment">/*=NULL*/</span> )
{
    <span class="keywordflow">if</span> (n &gt; kNValues)
        <span class="keywordflow">return</span>;
    <span class="keywordflow">if</span> (n == kNValues)
    {
        cout &lt;&lt; <span class="stringliteral">"\t\t..."</span> &lt;&lt; endl;
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">switch</span> (type)
    {
        <span class="keywordflow">case</span> kScalar:
            cout &lt;&lt; <span class="stringliteral">"\t\t"</span> &lt;&lt; *(<span class="keywordtype">float</span> *)data &lt;&lt; endl;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> kVector:
            cout &lt;&lt; <span class="stringliteral">"\t\t("</span> &lt;&lt; ((<span class="keywordtype">float</span> *)data)[0] &lt;&lt; <span class="stringliteral">", "</span>
                 &lt;&lt; ((<span class="keywordtype">float</span> *)data)[1] &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt; ((<span class="keywordtype">float</span> *)data)[2] &lt;&lt; <span class="stringliteral">")"</span>
                 &lt;&lt; endl;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> kVertex:
            cout &lt;&lt; <span class="stringliteral">"\t\t"</span> &lt;&lt; <span class="stringliteral">"Vertex "</span> &lt;&lt; id &lt;&lt; <span class="stringliteral">":  ("</span>
                 &lt;&lt; ((<span class="keywordtype">float</span> *)data)[0] &lt;&lt; <span class="stringliteral">", "</span>
                 &lt;&lt; ((<span class="keywordtype">float</span> *)data)[1] &lt;&lt; <span class="stringliteral">", "</span>
                 &lt;&lt; ((<span class="keywordtype">float</span> *)data)[2] &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; endl;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> kCell:
            cout &lt;&lt; <span class="stringliteral">"\t\t"</span> &lt;&lt; <span class="stringliteral">"Cell "</span> &lt;&lt; id &lt;&lt; <span class="stringliteral">":  type "</span> &lt;&lt; *(<span class="keywordtype">int</span> *)data
                 &lt;&lt; endl;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> kInternalFace:
            {
                <span class="keywordtype">int</span> nVerts = *(<span class="keywordtype">int</span> *)data;
                cout &lt;&lt; <span class="stringliteral">"\t\t"</span> &lt;&lt; <span class="stringliteral">"Face "</span> &lt;&lt; id &lt;&lt; <span class="stringliteral">": \tCells: "</span>
                     &lt;&lt; ((<span class="keywordtype">int</span> *)data2)[0] &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt; ((<span class="keywordtype">int</span> *)data2)[1]
                     &lt;&lt; <span class="stringliteral">"\tVertices: "</span>;
                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0;  i &lt; nVerts;  ++i)
                    cout &lt;&lt; *(((<span class="keywordtype">int</span> *)data) + 1 + i) &lt;&lt; <span class="stringliteral">" "</span>;
                cout &lt;&lt; endl;
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> kBoundaryFace:
            {
                <span class="keywordtype">int</span> nVerts = *(<span class="keywordtype">int</span> *)data;
                cout &lt;&lt; <span class="stringliteral">"\t\t"</span> &lt;&lt; <span class="stringliteral">"Face "</span> &lt;&lt; id &lt;&lt; <span class="stringliteral">": \tCell: "</span>
                     &lt;&lt; *(<span class="keywordtype">int</span> *)data2 &lt;&lt; <span class="stringliteral">"\tVertices: "</span>;
                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0;  i &lt; nVerts;  ++i)
                    cout &lt;&lt; *(((<span class="keywordtype">int</span> *)data) + 1 + i) &lt;&lt; <span class="stringliteral">" "</span>;
                cout &lt;&lt; endl;
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> kBoundaryData:
            cout &lt;&lt; <span class="stringliteral">"\t\tBoundary "</span> &lt;&lt; *(<span class="keywordtype">int</span> *)data &lt;&lt; <span class="stringliteral">"  priority "</span>
                 &lt;&lt; *(<span class="keywordtype">int</span> *)data2 &lt;&lt; endl;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> kBoundaryFaceData:
            {
                cout &lt;&lt; <span class="stringliteral">"\t\tBoundary data [ "</span>;
                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0;  i &lt; *(<span class="keywordtype">int</span> *)data2; ++i)
                    cout &lt;&lt; ((<span class="keywordtype">float</span> *)data)[i] &lt;&lt; <span class="stringliteral">" "</span>;
                cout &lt;&lt; <span class="stringliteral">"]"</span> &lt;&lt; endl;
            }
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> kCellType:
            cout &lt;&lt; <span class="stringliteral">"Cell type "</span> &lt;&lt; id &lt;&lt; <span class="stringliteral">":  "</span> &lt;&lt; (<span class="keywordtype">char</span> *)data &lt;&lt; endl;
            <span class="keywordflow">break</span>;
    }
}
</pre></div><hr><address style="align: right;"><small>Generated on Mon Jun 5 17:16:02 2006 for libccmio by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
